<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>PDF & Image OCR Coordinates</title>
	<style>
		body { font-family: Arial, sans-serif; margin: 24px; }
		.container { max-width: 1200px; margin: 0 auto; }
		.upload-card { border: 1px solid #ddd; padding: 16px; border-radius: 8px; }
		.page { margin-top: 24px; }
		.page-title { font-weight: bold; margin-bottom: 8px; }
		.page-wrapper { position: relative; display: inline-block; border: 1px solid #e5e5e5; }
		.page-image { display: block; }
		.box { position: absolute; border: 2px solid rgba(255, 0, 0, 0.8); box-sizing: border-box; }
		.label { position: absolute; top: -18px; left: 0; background: rgba(255,0,0,0.85); color: #fff; font-size: 12px; padding: 2px 4px; white-space: nowrap; }
		table { border-collapse: collapse; width: 100%; margin-top: 16px; }
		th, td { border: 1px solid #ddd; padding: 8px; text-align: left; font-size: 14px; }
		th { background-color: #f2f2f2; font-weight: bold; }
		tr:nth-child(even) { background-color: #fafafa; }
	</style>
</head>
<body>
	<div class="container">
		<h1>PDF & Image OCR Coordinates</h1>
		<div class="upload-card">
			<form method="post" action="/upload" enctype="multipart/form-data">
				<input type="file" name="file" accept="application/pdf,image/*" required />
				<button type="submit">Upload & Extract</button>
			</form>
		</div>

		{% if pages %}
			{% for page in pages %}
				<div class="page">
					<div class="page-title">{{ page.page_label }} — {{ page.width }} × {{ page.height }} px</div>
					<div class="page-wrapper" style="width: {{ page.width }}px; height: {{ page.height }}px;">
						<img class="page-image" src="data:image/png;base64,{{ page.image_b64 }}" width="{{ page.width }}" height="{{ page.height }}" alt="{{ page.page_label }}" />
						{% for b in page.boxes %}
							<div class="box" style="left: {{ b.x }}px; top: {{ b.y }}px; width: {{ b.right - b.x }}px; height: {{ b.bottom - b.y }}px;">
								<div class="label">{{ b.text }} ({{ '%.0f' % b.conf }})</div>
							</div>
						{% endfor %}
					</div>

					<h3>Extracted Text Data ({{ page.page_label }})</h3>
					<table>
						<thead>
							<tr>
								<th>#</th>
								<th>Text</th>
								<th>X (Left)</th>
								<th>Y (Top)</th>
								<th>Right</th>
								<th>Bottom</th>
								<th>Confidence</th>
							</tr>
						</thead>
						<tbody>
							{% for b in page.boxes %}
								<tr>
									<td>{{ loop.index }}</td>
									<td>{{ b.text }}</td>
									<td>{{ b.x }}</td>
									<td>{{ b.y }}</td>
									<td>{{ b.right }}</td>
									<td>{{ b.bottom }}</td>
									<td>{{ '%.1f' % b.conf }}</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			{% endfor %}
		{% endif %}
	</div>
</body>
</html>
